<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>X Bot Checker</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://db.onlinewebfonts.com" crossorigin>
    <link rel="preload" href="https://db.onlinewebfonts.com/t/2596d1a4136d9b1e0e9b1e4b5b988a2a.woff2" as="font" type="font/woff2" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css?v={{ timestamp }}" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css?v={{ timestamp }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js?v={{ timestamp }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@4.3.0/marked.min.js"></script>
    <style>
        /* Version: {{ timestamp }} */
        @font-face {
            font-family: 'Apotek Extended';
            src: url("{{ url_for('static', filename='fonts/apotek-extended-bold.otf') }}") format('opentype');
            font-weight: bold;
            font-style: normal;
            font-display: swap;
        }
        
        :root {
            --primary-color: #FF9D42; /* SMOK3 orange */
            --secondary-color: #1E2124; /* Dark background */
            --background-color: #121416; /* Darker background */
            --text-color: #FFFFFF;
            --card-bg: #1E2124;
            --border-color: #2A2E32;
            --accent-color: #FF9D42;
            --success-color: #4CAF50;
            --warning-color: #FF9800;
            --danger-color: #F44336;
            --highlight-color: #2A2E32;
            --score-percentage: 0%;
            --score-color: var(--success-color);
            --score-gradient: conic-gradient(var(--score-color) 0% var(--score-percentage), transparent var(--score-percentage) 100%);
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            padding: 0;
            margin: 0;
            min-height: 100vh;
            background-image: url("{{ url_for('static', filename='images/BG.png') }}");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            position: relative;
            overflow-x: hidden;
        }
        
        /* Add a semi-transparent overlay to ensure text readability */
        body::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(18, 20, 22, 0.55); /* Semi-transparent version of --background-color */
            z-index: -1;
        }
        
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent-color), transparent);
            opacity: 0.3;
            z-index: 1;
        }
        
        .navbar {
            background-color: rgba(30, 33, 36, 0.9);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .navbar-brand {
            display: flex;
            align-items: center;
            font-weight: 700;
            color: var(--text-color);
            text-decoration: none;
        }
        
        .navbar-brand img {
            height: 40px;
            width: auto;
            margin-right: 0;
            border-radius: 50%;
        }
        
        .container {
            max-width: 1000px;
            padding: 2rem 1rem;
        }
        
        .navbar-container {
            max-width: 1000px;
            padding: 0 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 0 auto;
            width: 100%;
        }
        
        .hero-section {
            text-align: center;
            padding: 3rem 0 2rem;
        }
        
        .hero-title {
            font-family: 'Apotek Extended', 'Arial Black', 'Helvetica Black', sans-serif !important;
            font-size: 3.2rem;
            font-weight: bold !important;
            margin-bottom: 1rem;
            background: linear-gradient(90deg, #FF9D42, #FFC107);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            text-shadow: 0 2px 10px rgba(255, 157, 66, 0.2);
        }
        
        .analysis-header {
            font-family: 'Apotek Extended', 'Arial Black', 'Helvetica Black', sans-serif !important;
            font-size: 2rem;
            font-weight: bold !important;
            margin-bottom: 1.5rem;
            color: var(--text-color);
            text-align: center;
            width: 100%;
            display: block;
        }
        
        .hero-subtitle {
            font-size: 1.3rem;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.9);
            max-width: 700px;
            margin: 0 auto 2rem;
            line-height: 1.6;
        }
        
        .form-container {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            width: 100%;
            max-width: 100%;
        }
        
        .form-group {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            width: 100%;
        }
        
        .form-control {
            flex: 1;
            background-color: var(--secondary-color);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .form-control:focus {
            background-color: rgba(0, 0, 0, 0.3);
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(255, 157, 66, 0.2);
            color: var(--text-color);
        }
        
        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .btn-primary {
            background: linear-gradient(90deg, #FF9D42, #FFC107);
            border: none;
            padding: 1rem 2.5rem;
            font-weight: 600;
            border-radius: 10px;
            transition: all 0.3s ease;
            color: #000;
            box-shadow: 0 4px 12px rgba(255, 157, 66, 0.3);
            letter-spacing: 0.5px;
        }
        
        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 16px rgba(255, 157, 66, 0.4);
            background: linear-gradient(90deg, #FFC107, #FF9D42);
            color: #000;
        }
        
        .btn-primary:active {
            transform: scale(1);
        }
        
        .loading {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 3rem;
            margin-top: 2rem;
            min-height: 200px;
        }
        
        .spinner {
            width: 70px;
            height: 70px;
            border: 5px solid rgba(255, 157, 66, 0.2);
            border-radius: 50%;
            border-top-color: var(--accent-color);
            animation: spin 1s ease-in-out infinite;
            margin: 0 auto 1.5rem;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loading-text {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 1rem;
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.8; }
            50% { opacity: 1; }
            100% { opacity: 0.8; }
        }
        
        .result-container {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 2rem;
            margin-top: 2rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
            display: none;
            width: 100%;
            max-width: 100%;
        }
        
        .card {
            background-color: var(--card-bg);
            border-radius: 16px;
            border: 1px solid var(--border-color);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
            overflow: hidden;
            /* Removed hover effect */
            transition: none;
        }
        
        /* Removed card hover effect */
        
        .card-header {
            background-color: rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid var(--border-color);
            padding: 1.5rem;
        }
        
        .card-header h5 {
            margin: 0;
            font-weight: 600;
            font-size: 1.3rem;
        }
        
        .card-body {
            padding: 2rem;
        }
        
        .score-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .score-circle {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--background-color), var(--card-bg));
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            position: relative;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            border: 4px solid var(--border-color);
            transition: all 0.3s ease;
        }
        
        .score-circle::before {
            content: '';
            position: absolute;
            top: -4px;
            left: -4px;
            right: -4px;
            bottom: -4px;
            border-radius: 50%;
            background: var(--score-gradient);
            mask: radial-gradient(transparent 65%, black 66%);
            -webkit-mask: radial-gradient(transparent 65%, black 66%);
            transition: all 0.5s ease;
        }
        
        #scoreValue {
            font-size: 3.5rem;
            font-weight: 700;
            color: var(--text-color);
            font-family: 'Apotek Extended', sans-serif;
        }
        
        .percentage-indicator {
            font-size: 1.5rem;
            font-weight: 500;
            color: var(--primary-color);
        }
        
        .score-label {
            font-size: 1.25rem;
            font-weight: 600;
            margin-top: 0.5rem;
            color: var(--text-color);
        }
        
        .score-low {
            border-color: var(--success-color);
        }
        
        .score-medium {
            border-color: var(--warning-color);
        }
        
        .score-high {
            border-color: var(--danger-color);
        }
        
        .metrics {
            display: flex;
            justify-content: space-between;
            margin: 2.5rem 0;
            border-top: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
            padding: 2rem 0;
        }
        
        .metric {
            text-align: center;
            flex: 1;
            padding: 0 0.5rem;
            transition: all 0.3s ease;
        }
        
        .metric:hover {
            transform: translateY(-5px);
        }
        
        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .metric-label {
            font-size: 0.9rem;
            color: var(--text-color);
            opacity: 0.8;
        }
        
        .engagement-chart-container {
            margin: 2.5rem 0;
            height: 400px;
            border-radius: 12px;
            padding: 1.5rem;
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border-color);
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);
        }
        
        .views-container {
            margin: 2rem 0;
            padding: 1.5rem;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            text-align: center;
        }
        
        .views-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--accent-color);
        }
        
        .views-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent-color);
        }
        
        .engagement-chart-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            text-align: center;
            color: var(--accent-color);
        }
        
        .explanation {
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            padding: 1.8rem;
            border-left: 4px solid var(--accent-color);
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);
        }
        
        .explanation h6 {
            font-weight: 600;
            margin-bottom: 1rem;
            font-size: 1.2rem;
            color: var(--accent-color);
        }
        
        .explanation p {
            margin-bottom: 0;
            line-height: 1.7;
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.05rem;
        }
        
        .disclaimer {
            margin-top: 2rem;
            padding: 1.2rem;
            background-color: rgba(0, 0, 0, 0.15);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            text-align: center;
        }
        
        .disclaimer p {
            margin-bottom: 0;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        footer {
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
            border-top: 1px solid var(--border-color);
            color: rgba(255, 255, 255, 0.6);
        }
        
        footer a {
            color: var(--accent-color);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        footer a:hover {
            color: var(--text-color);
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1.5rem;
            }
            
            .score-container {
                flex-direction: column;
                align-items: center;
            }
            
            .score-details {
                margin-left: 0;
                margin-top: 1rem;
                text-align: center;
            }
            
            .engagement-metrics {
                flex-direction: column;
            }
            
            .metric-card {
                width: 100%;
                margin-bottom: 1rem;
            }
            
            .score-circle {
                width: 150px;
                height: 150px;
            }
            
            #scoreValue {
                font-size: 3rem;
            }
            
            .percentage-indicator {
                font-size: 1.25rem;
            }
            
            .views-metric-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            .view-metric {
                width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 1rem 0.75rem;
            }
            
            .navbar-container {
                padding: 0.5rem 0.75rem;
            }
            
            .hero-title {
                font-size: 1.75rem;
            }
            
            .form-container {
                padding: 1.25rem;
            }
            
            .form-group {
                flex-direction: column;
            }
            
            .form-group .btn {
                margin-top: 1rem;
                width: 100%;
            }
            
            .form-control {
                width: 100%;
            }
            
            .social-links {
                gap: 0.5rem;
            }
            
            .social-icon {
                width: 32px;
                height: 32px;
                font-size: 1rem;
            }
            
            .score-circle {
                width: 120px;
                height: 120px;
            }
            
            #scoreValue {
                font-size: 2.5rem;
            }
            
            .percentage-indicator {
                font-size: 1rem;
            }
            
            .score-label {
                font-size: 1.1rem;
            }
        }
        
        /* Add styles for social icons */
        .social-links {
            display: flex;
            gap: 1rem;
            margin-left: auto;
        }
        
        .social-icon {
            color: var(--text-color);
            font-size: 1.2rem;
            transition: color 0.3s ease;
        }
        
        .social-icon:hover {
            color: var(--accent-color);
        }
        
        .history-btn {
            margin-left: 1rem;
            padding: 0.5rem 1.25rem;
            font-weight: 600;
            font-size: 0.9rem;
            border-radius: 8px;
            background: linear-gradient(90deg, #FF9D42, #FFC107);
            border: none;
            color: #000;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .history-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 157, 66, 0.3);
            background: linear-gradient(90deg, #FFC107, #FF9D42);
            color: #000;
            text-decoration: none;
        }
        
        .engagement-metrics {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 2rem;
        }
        
        .metric-card {
            background-color: var(--secondary-color);
            border-radius: 8px;
            padding: 1.25rem;
            flex: 1;
            min-width: calc(25% - 1rem);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        
        .views-container {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
        }
        
        .views-row {
            flex: 1;
            text-align: center;
        }
        
        /* New styles for views section */
        .views-metric-card {
            background-color: var(--secondary-color);
            border-radius: 8px;
            padding: 1.25rem;
            width: 100%;
            margin-top: 1rem;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        
        .views-metric-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 2rem;
            width: 100%;
        }
        
        .view-metric {
            flex: 1;
            text-align: center;
        }
        
        .view-metric .metric-value {
            font-size: 2.5rem;
            color: var(--accent-color);
        }
        
        @media (max-width: 992px) {
            .metric-card {
                min-width: calc(50% - 1rem);
            }
            
            .views-metric-container {
                gap: 2rem;
            }
        }
        
        @media (max-width: 576px) {
            .metric-card {
                min-width: 100%;
            }
            
            .form-group {
                flex-direction: column;
            }
            
            .views-metric-container {
                gap: 1.5rem;
            }
            
            .view-metric .metric-value {
                font-size: 1.75rem;
            }
        }
        
        /* Thank You Modal Styles */
        .modal-open {
            overflow: hidden;
        }
        
        .thank-you-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        
        .thank-you-modal.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            z-index: 1;
        }
        
        .modal-content {
            position: relative;
            width: 90%;
            max-width: 500px;
            background: linear-gradient(145deg, #1E2124, #2A2E32);
            border-radius: 16px;
            padding: 2.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 2;
            text-align: center;
            border: 1px solid var(--border-color);
            transform: translateY(30px);
            opacity: 0;
            animation: modalFadeIn 0.5s ease forwards;
        }
        
        @keyframes modalFadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .modal-icon {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 0 auto 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-logo {
            width: 240px;
            height: 240px;
            object-fit: contain;
            z-index: 2;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
        
        .pulse-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background-color: rgba(255, 157, 66, 0.2);
            z-index: 1;
            animation: pulseRing 2s infinite;
        }
        
        @keyframes pulseRing {
            0% {
                transform: scale(0.8);
                opacity: 0.3;
            }
            50% {
                opacity: 0.2;
            }
            100% {
                transform: scale(1.1);
                opacity: 0;
            }
        }
        
        .modal-title {
            font-family: 'Apotek Extended', sans-serif;
            font-size: 1.8rem;
            color: var(--primary-color);
            margin-bottom: 1.2rem;
            text-transform: uppercase;
        }
        
        .modal-text {
            font-size: 1.1rem;
            color: var(--text-color);
            margin-bottom: 1rem;
            line-height: 1.5;
        }
        
        .discord-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(45deg, #5865F2, #7289DA);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0.8rem 1.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            box-shadow: 0 4px 12px rgba(88, 101, 242, 0.4);
        }
        
        .discord-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(88, 101, 242, 0.5);
            color: white;
            text-decoration: none;
        }
        
        .discord-button i {
            margin-right: 0.5rem;
            font-size: 1.2rem;
        }
        
        .close-modal-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.2rem;
            cursor: pointer;
            transition: color 0.3s ease;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .close-modal-btn:hover {
            color: var(--text-color);
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        @media (max-width: 768px) {
            .modal-content {
                padding: 2rem;
            }
            
            .modal-title {
                font-size: 1.5rem;
            }
            
            .modal-text {
                font-size: 1rem;
            }
            
            .discord-button {
                padding: 0.7rem 1.2rem;
                font-size: 1rem;
            }
            
            .modal-icon {
                width: 200px;
                height: 200px;
            }
            
            .modal-logo {
                width: 160px;
                height: 160px;
            }
        }
        
        @media (max-width: 480px) {
            .modal-icon {
                width: 150px;
                height: 150px;
            }
            
            .modal-logo {
                width: 120px;
                height: 120px;
            }
        }
        
        /* End of Thank You Modal Styles */
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-container">
            <a href="/" class="navbar-brand">
                <img src="{{ url_for('static', filename='images/logo.png') }}?v={{ timestamp }}" alt="Logo">
            </a>
            <div class="social-links">
                <a href="https://www.x.com/smok3io" target="_blank" class="social-icon me-3">
                    <i class="fab fa-twitter"></i>
                </a>
                <a href="https://www.discord.gg/smok3" target="_blank" class="social-icon me-3">
                    <i class="fab fa-discord"></i>
                </a>
                <a href="https://www.smok3.io" target="_blank" class="social-icon">
                    <i class="fas fa-globe"></i>
                </a>
            </div>
        </div>
    </nav>
    
    <section class="hero-section">
        <div class="container">
            <h1 class="hero-title">X BOT CHECKER</h1>
            <p class="hero-subtitle">Analyze accounts and posts to detect potential bot activity. Enter a post URL or ID below to get started.</p>
            
            <div class="form-container">
                <form id="analyzeForm">
                    <div class="form-group">
                        <input type="text" class="form-control" id="tweetInput" placeholder="Enter Post URL or ID" required>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-search me-2"></i>Analyze Post
                        </button>
                    </div>
                </form>
            </div>
            
            <div class="loading" id="loadingIndicator">
                <div class="spinner"></div>
                <p class="loading-text">Analyzing post data...</p>
                <p class="text-muted" style="font-size: 0.9rem; margin-top: 0.5rem;">This may take a few moments</p>
            </div>
            
            <div class="result-container" id="resultContainer">
                <div class="card">
                    <div class="card-body">
                        <h2 class="analysis-header text-center">ANALYSIS RESULTS</h2>
                        <div class="score-container">
                            <div id="scoreCircle" class="score-circle">
                                <span id="scoreValue">0</span><span class="percentage-indicator">%</span>
                            </div>
                            <div class="score-label">Bot Likelihood</div>
                            <p class="text-center text-muted">Higher percentage indicates higher likelihood of bot activity</p>
                            <button id="reanalyzeButton" class="btn btn-outline-secondary" style="display: none;" onclick="reanalyzePost()">
                                <i class="fas fa-sync-alt"></i> Re-analyze
                            </button>
                        </div>
                        
                        <div class="engagement-metrics">
                            <div class="metric-card">
                                <div id="retweetCount" class="metric-value">0</div>
                                <div class="metric-label">Reposts</div>
                            </div>
                            <div class="metric-card">
                                <div id="likeCount" class="metric-value">0</div>
                                <div class="metric-label">Likes</div>
                            </div>
                            <div class="metric-card">
                                <div id="replyCount" class="metric-value">0</div>
                                <div class="metric-label">Replies</div>
                            </div>
                        </div>
                        
                        <div class="engagement-metrics">
                            <div class="metric-card">
                                <div id="avgRetweetCount" class="metric-value">0</div>
                                <div class="metric-label">User Avg Reposts</div>
                            </div>
                            <div class="metric-card">
                                <div id="avgLikeCount" class="metric-value">0</div>
                                <div class="metric-label">User Avg Likes</div>
                            </div>
                            <div class="metric-card">
                                <div id="avgReplyCount" class="metric-value">0</div>
                                <div class="metric-label">User Avg Replies</div>
                            </div>
                        </div>
                        
                        <div class="views-metric-card">
                            <div class="views-metric-container">
                                <div class="view-metric">
                                    <div id="viewCount" class="metric-value">0</div>
                                    <div class="metric-label">Views</div>
                                </div>
                                <div class="view-metric">
                                    <div id="avgViewCount" class="metric-value">0</div>
                                    <div class="metric-label">User Avg</div>
                                </div>
                                <div class="view-metric">
                                    <div id="rangeAvgViewCount" class="metric-value">0</div>
                                    <div class="metric-label">Similar Accts Avg</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="engagement-chart-container">
                            <h6 class="engagement-chart-title">Engagement Comparison (Reposts, Likes, Replies)</h6>
                            <canvas id="engagementChart"></canvas>
                        </div>
                        
                        <div class="explanation">
                            <h6><i class="fas fa-info-circle me-2"></i>Analysis Explanation</h6>
                            <p id="explanationText">Enter a post URL or ID above to analyze it for potential bot activity.</p>
                        </div>
                        
                        <div class="disclaimer">
                            <p><i class="fas fa-exclamation-circle me-2"></i><strong>Disclaimer:</strong> The analysis provided is based on available data patterns and algorithmic assessment. Results should be interpreted as indicative rather than definitive. This tool does not guarantee the identification of automated activity with absolute certainty, and assessments should be considered alongside other factors when evaluating account authenticity.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>© 2025 <a href="https://smok3.io" target="_blank">SMOK3</a>. All rights reserved.</p>
        </div>
    </footer>

    <!-- Thank You Modal -->
    <div id="thankYouModal" class="thank-you-modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-icon">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="SMOK3 Logo" class="modal-logo">
                <div class="pulse-ring"></div>
            </div>
            <h3 class="modal-title">Thanks for Using Our Tool!</h3>
            <p class="modal-text">We're helping creators quit their day job.</p>
            <p class="modal-text">Join our Discord to get paid opportunities.</p>
            <a href="https://www.discord.gg/smok3" target="_blank" class="discord-button">
                <i class="fab fa-discord"></i> Join Our Discord
            </a>
            <button class="close-modal-btn" onclick="closeThankYouModal()">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <script>
        // Counter to track how many posts have been analyzed
        let postAnalysisCounter = parseInt(localStorage.getItem('postAnalysisCounter') || '0');
        
        function formatNumber(num) {
            // Round the number to an integer
            num = Math.round(num);
            
            if (num >= 1000000) {
                return Math.round(num / 1000000) + 'M';
            } else if (num >= 1000) {
                return Math.round(num / 1000) + 'K';
            } else {
                return num.toString();
            }
        }
        
        function setScoreColor(score) {
            const scoreCircle = document.getElementById('scoreCircle');
            if (!scoreCircle) {
                console.error('Score circle element not found');
                return;
            }
            
            scoreCircle.classList.remove('score-low', 'score-medium', 'score-high');
            
            // Update the conic gradient to represent the percentage
            const beforeElement = scoreCircle.style.setProperty('--score-percentage', `${score}%`);
            
            // Set the color based on the score
            let scoreColor = 'var(--success-color)';
            if (score > 66) {
                scoreColor = 'var(--danger-color)';
                scoreCircle.classList.add('score-high');
            } else if (score > 33) {
                scoreColor = 'var(--warning-color)';
                scoreCircle.classList.add('score-medium');
            } else {
                scoreCircle.classList.add('score-low');
            }
            
            // Set the color variable
            scoreCircle.style.setProperty('--score-color', scoreColor);
            
            // Update the root gradient variable
            document.documentElement.style.setProperty('--score-gradient',
                `conic-gradient(${scoreColor} 0% ${score}%, transparent ${score}% 100%)`);
        }
        
        function animateCount(element, target, duration) {
            const start = parseInt(element.textContent.replace(/,/g, '')) || 0;
            const increment = (target - start) / (duration / 16);
            let current = start;
            
            const timer = setInterval(() => {
                current += increment;
                if ((increment > 0 && current >= target) || (increment < 0 && current <= target)) {
                    clearInterval(timer);
                    element.textContent = formatNumber(target);
                } else {
                    element.textContent = formatNumber(Math.round(current));
                }
            }, 16);
        }
        
        let engagementChart = null;
        let currentTweetId = null;
        
        document.getElementById('analyzeForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get the tweet URL or ID
            const tweetInput = document.getElementById('tweetInput').value.trim();
            
            if (!tweetInput) {
                alert('Please enter a valid X post URL or ID');
                return;
            }
            
            // Extract the tweet ID from the URL if needed
            let tweetId = tweetInput;
            
            // Check if it's a URL
            if (tweetInput.includes('/')) {
                // Extract the tweet ID from the URL
                const urlParts = tweetInput.split('/');
                tweetId = urlParts[urlParts.length - 1].split('?')[0];
            }
            
            // Analyze the post
            analyzePost(tweetId);
        });
        
        function reanalyzePost() {
            // Get the button
            const button = document.getElementById('reanalyzeButton');
            
            // Disable the button and show loading indicator
            button.disabled = true;
            const originalContent = button.innerHTML;
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Analyzing...';
            
            // Create a form and submit it to redirect to the reanalyze endpoint
            const form = document.createElement('form');
            form.method = 'GET';
            form.action = '/reanalyze';
            
            // Add the post ID as a hidden field
            const idField = document.createElement('input');
            idField.type = 'hidden';
            idField.name = 'id';
            idField.value = currentTweetId;
            form.appendChild(idField);
            
            // Add the redirect_to parameter
            const redirectField = document.createElement('input');
            redirectField.type = 'hidden';
            redirectField.name = 'redirect_to';
            redirectField.value = 'home';
            form.appendChild(redirectField);
            
            // Add the form to the document and submit it
            document.body.appendChild(form);
            form.submit();
        }
        
        function analyzePost(tweetId) {
            try {
                // Show loading indicator
                const loadingIndicator = document.getElementById('loadingIndicator');
                const resultContainer = document.getElementById('resultContainer');
                
                if (loadingIndicator) {
                    loadingIndicator.style.display = 'flex';
                }
                
                if (resultContainer) {
                    resultContainer.style.display = 'none';
                }
                
                // Make the API call
                fetch(`/?id=${tweetId}&analyze=true`)
                    .then(response => response.json())
                    .then(data => {
                        // Hide loading indicator
                        if (loadingIndicator) {
                            loadingIndicator.style.display = 'none';
                        }
                        
                        // Update the UI with the data
                        updateUI(data);
                        
                        // Show the result container
                        if (resultContainer) {
                            resultContainer.style.display = 'block';
                            
                            // Scroll to the results
                            resultContainer.scrollIntoView({ behavior: 'smooth' });
                        }
                        
                        // Store the tweet ID for re-analysis
                        currentTweetId = tweetId;
                        
                        // Show the re-analyze button
                        const reanalyzeButton = document.getElementById('reanalyzeButton');
                        if (reanalyzeButton) {
                            reanalyzeButton.style.display = 'block';
                        }
                    })
                    .catch(error => {
                        console.error('Error analyzing post:', error);
                        
                        // Hide loading indicator
                        if (loadingIndicator) {
                            loadingIndicator.style.display = 'none';
                        }
                        
                        // Show error message
                        alert(`Error analyzing post: ${error.message || 'Unknown error'}`);
                    });
            } catch (error) {
                console.error('Exception in analyzePost function:', error);
                alert(`Error analyzing post: ${error.message || 'Unknown error'}`);
                
                // Hide loading indicator in case of error
                const loadingIndicator = document.getElementById('loadingIndicator');
                if (loadingIndicator) {
                    loadingIndicator.style.display = 'none';
                }
            }
        }
        
        function updateUI(data) {
            // Update score (default to 0 if missing)
            const scoreValue = document.getElementById('scoreValue');
            if (scoreValue) {
                scoreValue.textContent = '0';
                animateCount(scoreValue, data.score || 0, 1500);
                setScoreColor(data.score || 0);
            }
            
            // Update explanation with Markdown support
            const explanationText = document.getElementById('explanationText');
            if (explanationText) {
                const explanation = data.explanation || 'No explanation available';
                explanationText.innerHTML = marked.parse(explanation);
            }
            
            // Update metrics
            const retweetCount = document.getElementById('retweetCount');
            if (retweetCount) {
                retweetCount.textContent = formatNumber(data.retweet_count || 0);
            }
            
            const likeCount = document.getElementById('likeCount');
            if (likeCount) {
                likeCount.textContent = formatNumber(data.favorite_count || 0);
            }
            
            const replyCount = document.getElementById('replyCount');
            if (replyCount) {
                replyCount.textContent = formatNumber(data.reply_count || 0);
            }
            
            const viewCount = document.getElementById('viewCount');
            if (viewCount) {
                viewCount.textContent = formatNumber(data.view_count || 0);
            }
            
            const followerCount = document.getElementById('followerCount');
            if (followerCount) {
                followerCount.textContent = formatNumber(data.followers || 0);
            }
            
            // Update average engagement metrics if available
            if (data.engagement_comparison && data.engagement_comparison.avg_engagement) {
                const avgRetweetCount = document.getElementById('avgRetweetCount');
                if (avgRetweetCount) {
                    avgRetweetCount.textContent = formatNumber(data.engagement_comparison.avg_engagement.avg_retweets || 0);
                }
                
                const avgLikeCount = document.getElementById('avgLikeCount');
                if (avgLikeCount) {
                    avgLikeCount.textContent = formatNumber(data.engagement_comparison.avg_engagement.avg_likes || 0);
                }
                
                const avgReplyCount = document.getElementById('avgReplyCount');
                if (avgReplyCount) {
                    avgReplyCount.textContent = formatNumber(data.engagement_comparison.avg_engagement.avg_replies || 0);
                }
                
                const avgViewCount = document.getElementById('avgViewCount');
                if (avgViewCount) {
                    avgViewCount.textContent = formatNumber(data.engagement_comparison.avg_engagement.avg_views || 0);
                }
            }
            
            // Update the similar accounts average view count
            if (data.follower_range_comparison && data.follower_range_comparison.avg_metrics) {
                const rangeAvgViewCount = document.getElementById('rangeAvgViewCount');
                if (rangeAvgViewCount) {
                    rangeAvgViewCount.textContent = formatNumber(data.follower_range_comparison.avg_metrics.avg_views || 0);
                }
            }
            
            // Update the chart if it exists
            updateEngagementChart(data);
            
            // Increment the post analysis counter
            postAnalysisCounter++;
            
            // Save counter to localStorage
            localStorage.setItem('postAnalysisCounter', postAnalysisCounter.toString());
            
            // Show the thank you modal on the 1st post and then every 5th post (5th, 10th, 15th, etc.)
            if (postAnalysisCounter === 1 || postAnalysisCounter % 5 === 0) {
                setTimeout(showThankYouModal, 5000);
            }
        }
        
        function updateEngagementChart(data) {
            // If the chart already exists, destroy it
            if (engagementChart) {
                engagementChart.destroy();
            }
            
            // Get the chart canvas
            const canvas = document.getElementById('engagementChart');
            if (!canvas) {
                console.error('Engagement chart canvas not found');
                return;
            }
            
            const ctx = canvas.getContext('2d');
            if (!ctx) {
                console.error('Could not get 2D context from canvas');
                return;
            }
            
            // Prepare the data - remove views, only include reposts, likes, and replies
            const currentEngagement = [
                data.retweet_count || 0,
                data.favorite_count || 0,
                data.reply_count || 0
            ];
            
            let avgEngagement = [0, 0, 0];
            if (data.engagement_comparison && data.engagement_comparison.avg_engagement) {
                avgEngagement = [
                    data.engagement_comparison.avg_engagement.avg_retweets || 0,
                    data.engagement_comparison.avg_engagement.avg_likes || 0,
                    data.engagement_comparison.avg_engagement.avg_replies || 0
                ];
            }
            
            // Prepare similar accounts data - remove views
            let similarAccountsEngagement = [0, 0, 0];
            if (data.follower_range_comparison && data.follower_range_comparison.avg_metrics) {
                similarAccountsEngagement = [
                    data.follower_range_comparison.avg_metrics.avg_retweets || 0,
                    data.follower_range_comparison.avg_metrics.avg_likes || 0,
                    data.follower_range_comparison.avg_metrics.avg_replies || 0
                ];
            }
            
            // Create the chart
            engagementChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Reposts', 'Likes', 'Replies'],
                    datasets: [
                        {
                            label: 'Current Post',
                            data: currentEngagement,
                            backgroundColor: 'rgba(255, 157, 66, 0.7)',
                            borderColor: 'rgba(255, 157, 66, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'User Average',
                            data: avgEngagement,
                            backgroundColor: 'rgba(54, 162, 235, 0.7)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Similar Accounts',
                            data: similarAccountsEngagement,
                            backgroundColor: 'rgba(75, 192, 192, 0.7)',
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    },
                    layout: {
                        padding: {
                            left: 10,
                            right: 10,
                            top: 20,
                            bottom: 10
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                padding: 20
                            }
                        }
                    }
                }
            });
        }
        
        // Thank You Modal Functions
        function showThankYouModal() {
            const modal = document.getElementById('thankYouModal');
            if (modal) {
                document.body.classList.add('modal-open');
                modal.classList.add('show');
            }
        }
        
        function closeThankYouModal() {
            const modal = document.getElementById('thankYouModal');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => {
                    document.body.classList.remove('modal-open');
                }, 300);
            }
        }
        
        // Close modal when clicking outside of it
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('thankYouModal');
            const modalContent = document.querySelector('.modal-content');
            
            if (modal && modal.classList.contains('show') && 
                event.target !== modalContent && 
                !modalContent.contains(event.target)) {
                closeThankYouModal();
            }
        });
    </script>
</body>
</html> 